<!DOCTYPE html>
<head>
    <title>Hemtjänst</title>
    <meta name="description" content="Open source, private and secure home automation ecosystem">
    <meta charset="UTF-8">
    <meta property="og:title" content="Hemtjänst" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://hemtjan.st/assets/img/hemtjanst.png" />
    <meta property="og:description" content="Open source, private and secure home automation ecosystem"/>
    <meta property="og:determiner" content="a" />
    <meta property="og:locale" content="en_GB" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Mono|IBM+Plex+Sans+Condensed" rel="stylesheet">
    <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js" integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ" crossorigin="anonymous"></script>
    <style type="text/css">
    .hero.is-medium {
        background: linear-gradient(
            rgba(0, 0, 0, 0.6),
            rgba(0, 0, 0, 0.6)
        ), url('https://picsum.photos/id/529/1200/500?blur=2') no-repeat center;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    }
    .title {
        font-family: 'IBM Plex Sans Condensed', sans-serif;
    }
    a.button {
        font-family: 'IBM Plex Sans Condensed', sans-serif;
    }
    code {
        font-family: 'Fira Mono', monospace;
    }
    </style>
</head>
<body>
    <div class="hero is-medium">
        <div class="hero-head">
            <nav class="navbar">
                <div class="container">
                    <div class="navbar-brand">
                        <a class="navbar-item">
                        </a>
                        <span class="has-text-white navbar-burger burger" data-target="navbarMenuHeroB">
                        <span></span>
                        <span></span>
                        <span></span>
                        </span>
                    </div>
                    <div id="navbarMenuHeroB" class="navbar-menu">
                        <div class="navbar-end">
                            <span class="navbar-item">
                                <a class="button is-white is-outlined">
                                    <span>Home</span>
                                </a>
                            </span>
                            <span class="navbar-item">
                                <a class="button is-white is-outlined" href="#bridges">
                                    <span>Bridges</span>
                                </a>
                            </span>
                            <span class="navbar-item">
                                <a class="button is-white is-outlined" href="#components">
                                    <span>Components</span>
                                </a>
                            </span>
                            <span class="navbar-item">
                                <a class="button is-white is-outlined" href="#demo">
                                    <span>Demo</span>
                                </a>
                            </span>
                            <span class="navbar-item">
                                <a class="button is-white" href="https://github.com/hemtjanst">
                                    <span class="icon">
                                        <i class="fab fa-github"></i>
                                    </span>
                                    <span>Source</span>
                                </a>
                            </span>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        <div class="hero-body">
            <div class="container has-text-centered">
                <h1 class="title has-text-white">
                    Hemtjänst
                </h1>
                <h2 class="subtitle has-text-white">
                    Private, personal, home automation
                </h2>
            </div>
        </div>
    </div>
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                        <i class="fas fa-2x fa-user-secret"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Private
                    </p>
                    <p class="has-text-justified">
                        Hemtjänst does not require an internet connection to function,
                        or a subscription to a cloud service. It's a local-first system
                        that doesn't track you. You own your data and you can do with
                        it whatever you want.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                        <i class="fas fa-2x fa-american-sign-language-interpreting"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Vendor neutral
                    </p>
                    <p class="has-text-justified">
                        A single protocol lets you control all devices in your
                        home. Bridges take care of translating
                        between Hemtjänst and vendor-specific protocols and can also
                        be used to extend Hemtjänst with new capabilities.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                        <i data-fa-transform="flip-h" class="fas fa-2x fa-history"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Real time
                    </p>
                    <p class="has-text-justified">
                        By leveraging <a href="http://mqtt.org/">MQTT</a> all interactions
                        feel immediate and real-time. Just like if you were interacting
                        with a physical device in the real world. Anyone connected to
                        the broker is immediately notified of any changes.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                        <i class="fas fa-2x fa-key"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Secure
                    </p>
                    <p class="has-text-justified">
                        All components can use TLS to encrypt their communication.
                        Additionally TLS client certificates or username and password
                        combinations can be used to gate access as well as
                        apply ACLs.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <hr class="hr">
    <section class="section">
        <p style="padding-bottom:1em;" class="title has-text-centered"><a class="has-text-black" name="bridges">Bridges</a></p>
        <div class="container">
            <div class="columns">
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-home"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Apple HomeKit
                    </p>
                    <p class="has-text-justified">
                        <a href="https://github.com/hemtjanst/hemtjanst">Hemtjänst</a>,
                        the bridge, exposes as many devices as possible
                        as HomeKit accessories and is a fully functioning HomeKit
                        bridge. You can pair the <a href="https://www.apple.com/ios/home/">
                        iOS Home app</a> with Hemtjänst and control your whole house from there.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-lightbulb"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        kea Trådfri
                    </p>
                    <p class="has-text-justified">
                        <a href="https://github.com/hemtjanst/sladdlos">Sladdlos</a>
                        and its sister component <a href="https://github.com/hemtjanst/tradfri-mqtt">
                        tradfri-mqtt expose</a> devices connected to the TRÅDFRI gateway. This lets you
                        control any light connected to the Ikea gateway
                        through Hemtjänst.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-eye"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Rödljus
                    </p>
                    <p class="has-text-justified">
                        <a href="https://github.com/hemtjanst/rodljus">Rödljus</a>
                        lets you control IR-based devices. It leverages
                        lircd and an IR-blaster to send comands. It's like pressing
                        actual buttons on a remote control.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-broadcast-tower"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        zVåg
                    </p>
                    <p class="has-text-justified">
                        <a href="https://github.com/hemtjanst/zvag">zVåg</a>
                        makes devices connected through Z-Wave available to
                        Hemtjänst. This can be devices like contact sensors, outlets
                        etc.
                    </p>
                </div>
            </div>
            <div class="columns">
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-tachometer-alt"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Sensorer
                    </p>
                    <p class="has-text-justified">
                        <a href="https://github.com/hemtjanst/sensorer">Sensorer</a>
                        is a <a href="https://prometheus.io/docs/instrumenting/exporters/">
                        Prometheus exporter</a>. It exposes the data
                        of sensor-like devices, for example temperature, in
                        the Prometheus <a href="https://prometheus.io/docs/instrumenting/exposition_formats/">
                        exposition format</a>. You can use <a href="https://prometheus.io/">Prometheus</a>
                        to scrape this data and <a href="https://grafana.com/">Grafana</a>
                        to graph it and get all kinds of insights into your home environment.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                        <i class="fab fa-2x fa-raspberry-pi"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        HallonLarm
                    </p>
                    <p class="has-text-justified">
                        <a href="https://github.com/hemtjanst/hallonlarm">HallonLarm</a>
                        exposes the GPIO pins of a Raspberry Pi as
                        topics onto the MQTT broker. You can listen for events
                        or send commands letting you hack together anything
                        your heart desires.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                        <i class="fas fa-2x fa-broom"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Dammsugare
                    </p>
                    <p class="has-text-justified">
                        <a href="https://github.com/hemtjanst/dammsugare">Dammsugare</a>
                        lets you control a Eufy RoboVac. It leverages
                        Rödljus under the hood to send the IR commands to turn the
                        robot on and off.
                    </p>
                </div>
                <div class="column is-3">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                        <i class="fas fa-2x fa-wind"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Flakt
                    </p>
                    <p class="has-text-justified">
                        Similar in spirit to dammsugare,
                        <a href="https://github.com/hemtjanst/flakt">flakt</a>
                        leverages Rödljus in order to be able to control a tower fan.
                    </p>
                </div>
            </div>
            <div class="columns">
                <div class="column is-offset-2 is-4">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-pencil-ruler"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Fargton
                    </p>
                    <p class="has-text-justified">
                        Almost ready for prime time, Fargton emulates a Philips
                        Hue v2 bridge and API. This lets you use the Hue app to
                        control compatible Hemtjänst devices, like lightbulbs.
                        It also means anything in the "Friends of Hue" ecosystem
                        automatically works with Hemtjänst.
                    </p>
                </div>
                <div class="column is-4">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-pencil-ruler"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Bidans
                    </p>
                    <p class="has-text-justified">
                        Currently a work in progress, Bidans is a ZigBee bridge.
                        Similar to Zvag, it exposes any ZigBee connected device to
                        Hemtjänst. This should obviate the need to support different
                        vendor gateways, like Trådfri, and vastly expand the amount
                        of supported devices.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <hr class="hr">
    <section class="section">
        <p style="padding-bottom:1em;" class="title has-text-centered"><a class="has-text-black" name="components">Components</a></p>
        <div class="container">
            <div class="columns">
                <div class="column is-offset-2 is-4">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-university"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Bibliotek
                    </p>
                    <p class="has-text-justified">
                        <a href="https://lib.hemtjan.st">Bibliotek</a> is a Go package
                        that implements the Hemtjänst
                        protocol as well as its discovery and announce mechanisms.
                        You can use it to create your own vendor bridges or
                        extend Hemtjänst with new capabilities.
                    </p>
                </div>
                <div class="column is-4">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fab fa-2x fa-js-square"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Hemtjänst-js
                    </p>
                    <p class="has-text-justified">
                        A <a href="https://github.com/hemtjanst/hemtjanst-js">TypeScript library</a>
                        implementing the Hemtjänst protocol.
                        From Node you can connect directly to the broker using
                        TLS, plain TCP or through websockets. In the browser you
                        can use websockets to connect to the broker.
                    </p>
                </div>
            </div>
            <div class="columns">
                <div class="column is-offset-2 is-4">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-dharmachakra"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Message broker
                    </p>
                    <p class="has-text-justified">
                        The message broker is the central nervous system of Hemtjänst.
                        Any MQTT v3.1+ broker will do but we happen to be using
                        <a href="https://mosquitto.org/">Eclipse Mosquitto</a>.
                    </p>
                </div>
                <div class="column is-4">
                    <p class="has-text-centered" style="padding-bottom: 0.5em;">
                            <i class="fas fa-2x fa-magic"></i>
                    </p>
                    <p class="title is-5 has-text-centered">
                        Node-RED
                    </p>
                    <p class="has-text-justified">
                        <a href="https://nodered.org/">Node-RED</a> is an open source
                        programming environment for the Internet of Things. It supports
                        MQTT out of the box letting you interact with all Hemtjänst
                        devices. Use it to create any kind of automation you want.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <hr class="hr">
    <section class="section">
        <p class="title has-text-centered"><a class="has-text-black" name="demo">Demo</a></p>
        <div class="container">
                <div class="columns is-desktop">
                    <div class="column is-offset-2 is-8">
                        <p style="padding-bottom:2em;" class="has-text-justified">
                            This is a demonstration of how to turn on a lightbulb with just an MQTT CLI.
                            It requires minimal understanding of the Hemtjänst protocol and no knowledge
                            of what IoT protocol the device itself is using.
                            Libraries like <a href="https://lib.hemtjan.st">bibliotek</a>
                            take care of the discover/announce flow and keep monitoring for device
                            updates in the background. The whole flow is shown here for completeness.
                            If you already know the device topics there is no need for the discover/announce
                            flow.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="columns is-desktop">
            <div class="column is-6">
                <p class="title is-5">Start by subscribing to the announce topic</p>
                <pre><code>
mqttcli <span class="has-text-info">sub</span> -t 'announce/#'
                </code></pre>
            </div>
            <div class="column is-6">
                <p class="title is-5">&nbsp;</p>
                <p>Once you  <span class="has-text-info">pub</span>lish to the
                    <code>discover</code> topic all devices will announce themselves
                    to a <code>announce/&lt;id&gt;</code> topic. By subscribing to <code>announce/#</code>
                    we'll receive all mesages published to topics underneath <code>announce/</code>.
                    The <code>#</code> is the MQTT equivalent of a wildcard.
                </p>
            </div>
        </div>
        <div class="columns is-desktop">
            <div class="column is-offset-6">
                <p class="title is-5">Discover all devices</p>
                <pre><code>
mqttcli <span class="has-text-info">pub</span> -t 'discover' -r -m ''
                </code></pre>
            </div>
        </div>
        <div class="columns is-desktop">
            <div class="column is-7">
                <p class="title is-5">Receive all the device announcements</p>
                <pre><code class="lang-json">
...
{
    "topic": <span class="has-text-info">"light/grp-193347"</span>,
    "name": "Kitchen",
    "manufacturer": "IKEA",
    "model": "Trådfri Group",
    "serialNumber": "193347",
    "type": "lightbulb",
    "lastWillID": "sladdlos-c7274f9f-471d-4674-8075-81ad4c2d31f0",
    "feature": {
        "brightness": {
            "getTopic": "light/grp-193347/brightness/get",
            "setTopic": "light/grp-193347/brightness/set"
        },
        "colorTemperature": {
            "getTopic": "light/grp-193347/colorTemperature/get",
            "setTopic": "light/grp-193347/colorTemperature/set"
        },
        "on": {
            "getTopic": <span class="has-text-info">"light/grp-193347/</span><strong><span class="has-text-primary">on/get"</span></strong>,
            "setTopic": <span class="has-text-info">"light/grp-193347/</span><strong><span class="has-text-danger">on/set"</span></strong>
        }
    }
}
{
    "name": "Kitchen small_window",
    "type": "contactSensor",
    "manufacturer": "Telldus",
    "model": "Device 23",
    "feature": {
        "contactSensorState": {}
    }
}
...
                </code></pre>
            </div>
        </div>
        <div class="columns is-desktop">
            <div class="column is-6">
                <p class="title is-5">Subscribe to the kitchen light on/off state</p>
                <pre><code>
mqttcli <span class="has-text-info">sub</span> -t <span class="has-text-info">"light/grp-193347/</span><strong><span class="has-text-primary">on/get"</span></strong>
0
                </code></pre>
            </div>
            <div class="column is-6">
                <p class="title is-5">Possible device states</p>
                <pre><code>
0: the device is off
1: the device is on
                </code></pre>
            </div>
        </div>
        <div class="columns is-desktop">
            <div class="column is-offset-6">
                <p class="title is-5">Turn on the kitchen light</p>
                <pre><code>
mqttcli <span class="has-text-info">pub</span> -t <span class="has-text-info">"light/grp-193347/</span><strong><span class="has-text-danger">on/set"</span></strong> -m '1'
                </code></pre>
            </div>
        </div>
        <div class="columns is-desktop">
            <div class="column is-6">
                <p class="title is-5">Receive notification that the light has been turned on</p>
                <pre><code>
1
                </code></pre>
            </div>
        </div>
        <div class="container">
                <div class="columns is-desktop">
                    <div class="column is-offset-2 is-8">
                        <p style="padding-bottom:2em;" class="has-text-justified">
                            One important thing to realise is that the value you receive
                            on the <code>get</code> topic is the actual state of the device. When you
                            publish to <code>set</code>, a bridge will then send the
                            actual command to the bulb to turn on. Only once the light is on
                            does a bridge publish the new state onto the <code>get</code>
                            topic which you then receive. As such publishing onto <code>get</code>
                            does not imply an update to <code>set</code>. Only if the device manages
                            to achieve the new state will you get an update.
                            <code>get</code> and <code>set</code>
                            are a bit of a misnomer and are likely to get renamed to something
                            like <code>current</code> and <code>desired</code>.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer class="footer">
        <div class="content has-text-centered">
            <p>
            <strong>Hemtjänst</strong> is made with 💙 in 🇸🇪. All components are
            <strong>open source</strong> and licensend under the
            <a href="https://www.apache.org/licenses/LICENSE-2.0"> Apache 2 License</a>.
            </p>
        </div>
    </footer>
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', () => {
            const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
            if ($navbarBurgers.length > 0) {
                $navbarBurgers.forEach( el => {
                    el.addEventListener('click', () => {
                        const target = el.dataset.target;
                        const $target = document.getElementById(target);
                        el.classList.toggle('is-active');
                        $target.classList.toggle('is-active');
                        const $buttons = Array.prototype.slice.call($target.querySelectorAll('.button'), 0);
                        if ($buttons.length > 0) {
                            $buttons.forEach( el => {
                                el.classList.toggle('is-black')
                            })
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>
